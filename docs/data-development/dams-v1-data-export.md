# DAMS v1 Data Export Process

This document describes the process for exporting data from DAMS v1.

## Authenticate

First, login to both `https://digital.ucdavis.edu` and `https://sandbox.dams.library.ucdavis.edu`.  If you are on your laptop, you can ditch the `--headless` flags.  But it is recommened you develop on `sandbox`.

```bash
fin config set host https://sandbox.dams.library.ucdavis.edu
fin auth login --headless

fin config set host https://digital.ucdavis.edu
fin auth login --headless --service-name cas
```

## Export Collection

This command will export from Fedora v4 (DAMS v1 uses Fedora v4), run some nice metadata cleanup rules to prepare for DAMS v2 and use the `fin io` config from sandbox.

```bash
fin config set host https://digital.ucdavis.edu
fin io export --from-v1 --f4 --config-host https://sandbox.dams.library.ucdavis.edu /collection/[collection-name] .
```

## Cleanup data

First, it is now required to unnest your items from your collections.  Create two root folder `/collection` and `/items`.  Move all your items into `/items` and all your collections into `/collection`.

Next, port your hdt file to jsonld.  There is a DAMS cli utility for this `dams hdt-to-jsonld [file-path]`. Make sure and cleanup the auxillary files generated by hdt during this process.  You should update your `hasGraph` pointer as well, though this link is no longer required.

Make sure all root item and the collection metadata files have `@type` of `http://fedora.info/definitions/v4/repository#ArchivalGroup`